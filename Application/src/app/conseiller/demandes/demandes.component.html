<div class="container">

<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#adhesion">Demandes d'adhésion</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#clients">Demandes Clients</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#messages">Messages</a>
  </li>
</ul>

<div class="tab-content">
  
  <div class="tab-pane active container" id="adhesion">
  	
  	<div class="table-responsive">
	<table class="table table-striped table-bordered table-sm">
		<tr>
			<th>IdDemande</th>
			<th>Statut</th>
			<th>Date de demande</th>
			<th>Date de traitement</th>
			<th>Actions</th>
		</tr>
		<tr *ngFor="let d of demandesInscription">
			<td>{{d.idDemande}}</td>
			<td>{{d.statut}}</td>
			<td>{{d.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{d.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-primary" (click)="afficherDemandeInscription(d.idDemande)">Afficher</button>
			</td>
		</tr>
	</table>
	</div>

	<div class="table-responsive {{demandeInscriptionTable}}">
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<th colspan="2" rowspan="4" style="vertical-align: middle; text-align: center">Identité</th>
				<th>Titre de civilite</th>
				<td>{{clientInscription.identite.titreCivilite}}</td>
			</tr>
			<tr>
				<th>Nom</th>
				<td>{{clientInscription.identite.nom}}</td>
			</tr>
			<tr>
				<th>Prénom</th>
				<td>{{clientInscription.identite.prenom}}</td>
			</tr>
			<tr>
				<th>Date de naissance</th>
				<td>{{clientInscription.identite.dateNaissance | date: 'dd/MM/yyyy'}}</td>
			</tr>
			<tr>
				<th colspan="2" rowspan="2" style="vertical-align: middle; text-align: center">Situation familiale</th>
				<th>Situation matrimoniale</th>
				<td>{{clientInscription.situationFamiliale.situationMatrimoniale}}</td>
			</tr>
			<tr>
				<th>Nombre d'enfants</th>
				<td>{{clientInscription.situationFamiliale.nombreEnfants}}</td>
			</tr>
			<tr>
				<th rowspan="8" style="vertical-align: middle; text-align: center">Contact</th>
				<th rowspan="6" style="vertical-align: middle; text-align: center">Adresse</th>
				<th>Numéro de la voie</th>
				<td>{{clientInscription.contact.adresse.numeroVoie}}</td>
			</tr>
			<tr>
				<th>Libellé de la voie</th>
				<td>{{clientInscription.contact.adresse.libelleVoie}}</td>
			</tr>
			<tr>
				<th>Complément d'adresse</th>
				<td>{{clientInscription.contact.adresse.complementAdresse}}</td>
			</tr>
			<tr>
				<th>Code Postal</th>
				<td>{{clientInscription.contact.adresse.codePostal}}</td>
			</tr>
			<tr>
				<th>Ville</th>
				<td>{{clientInscription.contact.adresse.ville}}</td>
			</tr>
			<tr>
				<th>Pays</th>
				<td>{{clientInscription.contact.adresse.pays}}</td>
			</tr>
			<tr>
				<th colspan="2" style="vertical-align: middle; text-align: center">Téléphone</th>
				<td>{{clientInscription.contact.telephone}}</td>
			</tr>
			<tr>
				<th colspan="2" style="vertical-align: middle; text-align: center">Email</th>
				<td>{{clientInscription.contact.email}}</td>
			</tr>
			<tr>
				<th colspan="2" rowspan="2" style="vertical-align: middle; text-align: center">Documents</th>
				<th>Piece d'identité</th>
				<td>{{clientInscription.documents.pieceIdentite}}</td>
			</tr>
			<tr>
				<th>Justificatif de domicile</th>
				<td>{{clientInscription.documents.justificatifDomicile}}</td>
			</tr>
		</table>
		<br>
		<button class="btn btn-success {{demandeInscriptionAccepter}}" (click)="accepterDemande(demandeInscription)">Accepter</button>
		<button class="btn btn-danger {{demandeInscriptionRefuser}}" (click)="refuserDemande(demandeInscription)">Refuser</button>
	</div>

  </div>

  <div class="tab-pane container" id="clients">
  	
  	<div class="table-responsive">
	<table class="table table-striped table-bordered table-sm">
		<tr>
			<th>IdDemande</th>
			<th>Statut</th>
			<th>Date de demande</th>
			<th>Date de traitement</th>
			<th>Actions</th>
		</tr>
		<tr>
			<td colspan="4" align="center" style="font-weight: bold;">Demande de modification de données</td>
		</tr>
		<tr *ngFor="let d of demandesModificationDonnees">
			<td>{{d.idDemande}}</td>
			<td>{{d.statut}}</td>
			<td>{{d.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{d.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-primary" (click)="afficherDemandeModificationDonnees(d.idDemande)">Afficher</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" align="center" style="font-weight: bold;">Demande Chequier</td>
		</tr>
		<tr *ngFor="let d of demandesChequier">
			<td>{{d.idDemande}}</td>
			<td>{{d.statut}}</td>
			<td>{{d.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{d.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-success {{demandeAccepterRefuser[d.idDemande]}}" (click)="accepterDemande(d.idDemande)">Accepter</button>
				<button class="btn btn-danger {{demandeAccepterRefuser[d.idDemande]}}" (click)="refuserDemande(d.idDemande)">Refuser</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" align="center" style="font-weight: bold;">Demande RIB</td>
		</tr>
		<tr *ngFor="let d of demandesRib">
			<td>{{d.idDemande}}</td>
			<td>{{d.statut}}</td>
			<td>{{d.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{d.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-success {{demandeAccepterRefuser[d.idDemande]}}" (click)="accepterDemande(d.idDemande)">Accepter</button>
				<button class="btn btn-danger {{demandeAccepterRefuser[d.idDemande]}}" (click)="refuserDemande(d.idDemande)">Refuser</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" align="center" style="font-weight: bold;">Demande d'ouverture de compte bancaire</td>
		</tr>
		<tr *ngFor="let d of demandesOuvertureCompte">
			<td>{{d.idDemande}}</td>
			<td>{{d.statut}}</td>
			<td>{{d.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{d.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-success {{demandeAccepterRefuser[d.idDemande]}}" (click)="accepterDemande(d.idDemande)">Accepter</button>
				<button class="btn btn-danger {{demandeAccepterRefuser[d.idDemande]}}" (click)="refuserDemande(d.idDemande)">Refuser</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" align="center" style="font-weight: bold;">Demande de fermeture de compte bancaire</td>
		</tr>
		<tr *ngFor="let d of demandesFermetureCompte">
			<td>{{d.idDemande}}</td>
			<td>{{d.statut}}</td>
			<td>{{d.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{d.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-success {{demandeAccepterRefuser[d.idDemande]}}" (click)="accepterDemande(d.idDemande)">Accepter</button>
				<button class="btn btn-danger {{demandeAccepterRefuser[d.idDemande]}}" (click)="refuserDemande(d.idDemande)">Refuser</button>
			</td>
		</tr>
	</table>
	</div>

	<div class="table-responsive {{demandeClientTable}}">
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<td colspan="3"></td>
				<th>Avant modification</th>
				<th>Après modification</th>
			</tr>
			<tr>
				<th colspan="2" rowspan="4" style="vertical-align: middle; text-align: center">Identité</th>
				<th>Titre de civilite</th>
				<td>{{clientBefore.identite.titreCivilite}}</td>
				<td>{{clientAfter.identite.titreCivilite}}</td>
			</tr>
			<tr>
				<th>Nom</th>
				<td>{{clientBefore.identite.nom}}</td>
				<td>{{clientAfter.identite.nom}}</td>
			</tr>
			<tr>
				<th>Prénom</th>
				<td>{{clientBefore.identite.prenom}}</td>
				<td>{{clientAfter.identite.prenom}}</td>
			</tr>
			<tr>
				<th>Date de naissance</th>
				<td>{{clientBefore.identite.dateNaissance | date: 'dd/MM/yyyy'}}</td>
				<td>{{clientAfter.identite.dateNaissance | date: 'dd/MM/yyyy'}}</td>
			</tr>
			<tr>
				<th colspan="2" rowspan="2" style="vertical-align: middle; text-align: center">Situation familiale</th>
				<th>Situation matrimoniale</th>
				<td>{{clientBefore.situationFamiliale.situationMatrimoniale}}</td>
				<td>{{clientAfter.situationFamiliale.situationMatrimoniale}}</td>
			</tr>
			<tr>
				<th>Nombre d'enfants</th>
				<td>{{clientBefore.situationFamiliale.nombreEnfants}}</td>
				<td>{{clientAfter.situationFamiliale.nombreEnfants}}</td>
			</tr>
			<tr>
				<th rowspan="8" style="vertical-align: middle; text-align: center">Contact</th>
				<th rowspan="6" style="vertical-align: middle; text-align: center">Adresse</th>
				<th>Numéro de la voie</th>
				<td>{{clientBefore.contact.adresse.numeroVoie}}</td>
				<td>{{clientAfter.contact.adresse.numeroVoie}}</td>
			</tr>
			<tr>
				<th>Libellé de la voie</th>
				<td>{{clientBefore.contact.adresse.libelleVoie}}</td>
				<td>{{clientAfter.contact.adresse.libelleVoie}}</td>
			</tr>
			<tr>
				<th>Complément d'adresse</th>
				<td>{{clientBefore.contact.adresse.complementAdresse}}</td>
				<td>{{clientAfter.contact.adresse.complementAdresse}}</td>
			</tr>
			<tr>
				<th>Code Postal</th>
				<td>{{clientBefore.contact.adresse.codePostal}}</td>
				<td>{{clientAfter.contact.adresse.codePostal}}</td>
			</tr>
			<tr>
				<th>Ville</th>
				<td>{{clientBefore.contact.adresse.ville}}</td>
				<td>{{clientAfter.contact.adresse.ville}}</td>
			</tr>
			<tr>
				<th>Pays</th>
				<td>{{clientBefore.contact.adresse.pays}}</td>
				<td>{{clientAfter.contact.adresse.pays}}</td>
			</tr>
			<tr>
				<th colspan="2" style="vertical-align: middle; text-align: center">Téléphone</th>
				<td>{{clientBefore.contact.telephone}}</td>
				<td>{{clientAfter.contact.telephone}}</td>
			</tr>
			<tr>
				<th colspan="2" style="vertical-align: middle; text-align: center">Email</th>
				<td>{{clientBefore.contact.email}}</td>
				<td>{{clientAfter.contact.email}}</td>
			</tr>
			<tr>
				<th colspan="2" rowspan="2" style="vertical-align: middle; text-align: center">Documents</th>
				<th>Piece d'identité</th>
				<td>{{clientBefore.documents.pieceIdentite}}</td>
				<td>{{clientAfter.documents.pieceIdentite}}</td>
			</tr>
			<tr>
				<th>Justificatif de domicile</th>
				<td>{{clientBefore.documents.justificatifDomicile}}</td>
				<td>{{clientAfter.documents.justificatifDomicile}}</td>
			</tr>
		</table>
		<br>
		<button class="btn btn-success {{demandeClientAccepter}}" (click)="accepterDemande(demandeClient)">Accepter</button>
		<button class="btn btn-danger {{demandeClientRefuser}}" (click)="refuserDemande(demandeClient)">Refuser</button>
	</div>
  
  </div>

  <div class="tab-pane container" id="messages">
  	
  	<div class="table-responsive">
	<table class="table table-striped table-bordered table-sm">
		<tr>
			<th>IdDemande</th>
			<th>Statut</th>
			<th>Date de réception</th>
			<th>Date de réponse</th>
			<th>Actions</th>
		</tr>
		<tr>
			<td colspan="5" align="center" style="font-weight: bold;">Messages Client</td>
		</tr>
		<tr *ngFor="let m of messagesClient">
			<td>{{m.idDemande}}</td>
			<td>{{m.statut}}</td>
			<td>{{m.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{m.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-primary" (click)="afficherMessageClient(m.idDemande)">Afficher</button>
			</td>
		</tr>
		<tr>
			<td colspan="5" align="center" style="font-weight: bold;">Messages Public</td>
		</tr>
		<tr *ngFor="let m of messagesPublic">
			<td>{{m.idDemande}}</td>
			<td>{{m.statut}}</td>
			<td>{{m.dateDemande | date: 'dd/MM/yyyy'}}</td>
			<td>{{m.dateTraitement | date: 'dd/MM/yyyy'}}</td>
			<td>
				<button class="btn btn-primary" (click)="afficherMessagePublic(m.idDemande)">Afficher</button>
			</td>
		</tr>
	</table>
	</div>

	<div class="table-responsive {{messageTable}}">
	<table class="table table-striped table-bordered table-sm">
		<tr>
			<th>IdClient</th>
			<th>Titre de civilité</th>
			<th>Nom</th>
			<th>Prénom</th>
			<th>Email</th>
			<th>Sujet</th>
			<th>Message</th>
		</tr>
		<tr>
			<td>{{message['idClient']}}</td>
			<td>{{message['titreCivilite']}}</td>
			<td>{{message['nom']}}</td>
			<td>{{message['prenom']}}</td>
			<td>{{message['email']}}</td>
			<td>{{message['sujet']}}</td>
			<td>{{message['message']}}</td>
		</tr>
	</table>
	<br>
	<button class="btn btn-success {{messageRepondre}}" (click)="accepterDemande(message['idDemande'])">Répondre</button>
	</div>

  </div>

</div>

</div>