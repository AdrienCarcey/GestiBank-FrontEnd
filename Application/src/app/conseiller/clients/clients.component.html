<div class="container">

<div class="table-responsive">
	<table class="table table-striped table-bordered table-sm">
		<tr>
			<th>IdClient</th>
			<th>Statut</th>
			<th>Date d'ouverture du compte</th>
			<th>Nom</th>
			<th>Prénom</th>
			<th>Actions</th>
		</tr>
		<tr *ngFor="let c of clients">
			<td>{{c.idUtilisateur}}</td>
			<td>{{c.statut}}</td>
			<td>{{c.dateOuvertureCompte | date: 'dd/MM/yyyy'}}</td>
			<td>{{c.identite.nom}}</td>
			<td>{{c.identite.prenom}}</td>
			<td>
				<button class="btn btn-primary" (click)="findClientAccount(c.idUtilisateur)">Afficher</button>
				<button class="btn btn-success" (click)="openClientAccount(c.idUtilisateur)">Ouvrir</button>
				<button class="btn btn-danger" (click)="closeClientAccount(c.idUtilisateur)">Fermer</button>
			</td>
		</tr>
	</table>
</div>

<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#infoPersonnelles">Informations personnelles</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#infoBancaires">Informations bancaires</a>
  </li>
</ul>

<div class="tab-content">

  <div class="tab-pane active container" id="infoPersonnelles">
  	<br>
  	<div class="table-responsive">
		<form class="form-group" [formGroup]="clientForm">
		<h3>Identité</h3>
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<th>Titre de civilite</th>
				<td><input class="form-control" type="text" formControlName="titreCivilite" value={{client.identite.titreCivilite}}></td>
			</tr>
			<tr>
				<th>Nom</th>
				<td><input class="form-control" type="text" formControlName="nom" value={{client.identite.nom}}></td>
			</tr>
			<tr>
				<th>Prénom</th>
				<td><input class="form-control" type="text" formControlName="prenom" value={{client.identite.prenom}}></td>
			</tr>
			<tr>
				<th>Date de naissance</th>
				<td><input class="form-control" type="text" formControlName="dateNaissance" value="{{client.identite.dateNaissance | date: 'dd/MM/yyyy'}}"></td>
			</tr>
		</table>
		<h3>Situation familiale</h3>
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<th>Situation matrimoniale</th>
				<td><input class="form-control" type="text" formControlName="situationMatrimoniale" value={{client.situationFamiliale.situationMatrimoniale}}></td>
			</tr>
			<tr>
				<th>Nombre d'enfants</th>
				<td><input class="form-control" type="text" formControlName="nombreEnfants" value={{client.situationFamiliale.nombreEnfants}}></td>
			</tr>
		</table>
		<h3>Contact</h3>
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<th rowspan="6">Adresse</th>
				<th>Numéro de la voie</th>
				<td><input class="form-control" type="text" formControlName="numeroVoie" value={{client.contact.adresse.numeroVoie}}></td>
			</tr>
			<tr>
				<th>Libellé de la voie</th>
				<td><input class="form-control" type="text" formControlName="libelleVoie" value={{client.contact.adresse.libelleVoie}}></td>
			</tr>
			<tr>
				<th>Complément d'adresse</th>
				<td><input class="form-control" type="text" formControlName="complementAdresse" value={{client.contact.adresse.complementAdresse}}></td>
			</tr>
			<tr>
				<th>Code Postal</th>
				<td><input class="form-control" type="text" formControlName="codePostal" value={{client.contact.adresse.codePostal}}></td>
			</tr>
			<tr>
				<th>Ville</th>
				<td><input class="form-control" type="text" formControlName="ville" value={{client.contact.adresse.ville}}></td>
			</tr>
			<tr>
				<th>Pays</th>
				<td><input class="form-control" type="text" formControlName="pays" value={{client.contact.adresse.pays}}></td>
			</tr>
			<tr>
				<th>Téléphone</th>
				<td colspan="2"><input class="form-control" type="text" formControlName="telephone" value={{client.contact.telephone}}></td>
			</tr>
			<tr>
				<th>Email</th>
				<td colspan="2"><input class="form-control" type="text" formControlName="email" value={{client.contact.email}}></td>
			</tr>
		</table>
		<h3>Documents</h3>
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<th>Piece d'identité</th>
				<td><input class="form-control" type="text" formControlName="pieceIdentite" value={{client.documents.pieceIdentite}}></td>
			</tr>
			<tr>
				<th>Justificatif de domicile</th>
				<td><input class="form-control" type="text" formControlName="justificatifDomicile" value={{client.documents.justificatifDomicile}}></td>
			</tr>
		</table>
		<br>
		<button class="btn btn-success {{buttonModifierClient}}" (click)="modifierClient()" >Modifier</button>
		<br>
		<button class="btn btn-danger {{buttonAnnulerClient}}" (click)="annulerClient()">Annuler</button>
  		<button class="btn btn-success {{buttonEnregistrerClient}}" (click)="updateClientAccount(client.idUtilisateur)">Enregistrer</button>
		</form>
	</div>
  </div>

  <div class="tab-pane container" id="infoBancaires">
  	<h3>Comptes</h3>
  	<div class="table-responsive">
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<th>idCompte</th>
				<th>Statut</th>
				<th>Type</th>
				<th>Solde</th>
				<th>Actions</th>
			</tr>
			<tr *ngFor="let c of client.comptes">
				<td>{{c.idCompte}}</td>
				<td>{{c.statut}}</td>
				<td></td>
				<td>{{c.solde}}</td>
				<td>
					<button class="btn btn-primary" (click)="findCompteOperation(c.idCompte)" >Afficher</button>
					<button class="btn btn-success" (click)="openClientCompte(c.idCompte)">Ouvrir</button>
					<button class="btn btn-danger" (click)="closeClientCompte(c.idCompte)">Fermer</button>
				</td>
			</tr>
		</table>
	</div>
	<h3>Opérations</h3>
  	<div class="table-responsive">
		<table class="table table-striped table-bordered table-sm">
			<tr>
				<th>idOperation</th>
				<th>dateOperation</th>
				<th>libelleOperation</th>
				<th>montantOperation</th>
			</tr>
			<tr *ngFor="let operation of operationsBancaires">
				<td>{{operation.idOperation}}</td>
				<td>{{operation.dateOperation | date: 'dd/MM/yyyy'}}</td>
				<td>{{operation.libelleOperation}}</td>
				<td>{{operation.montantOperation}}</td>
			</tr>
		</table>
	</div>
  </div>

</div>

</div>